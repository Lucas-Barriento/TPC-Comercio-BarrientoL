CREATE DATABASE COMERCIO_DB
GO

USE COMERCIO_DB
GO
CREATE TABLE DBO.CLIENTES
	(ID INT PRIMARY KEY NOT NULL,
	NOMBRE VARCHAR(30) NOT NULL,
	APELLIDO VARCHAR(30) NOT NULL)

CREATE TABLE DBO.PROVEEDORES
	(ID INT PRIMARY KEY NOT NULL,
	NOMBRE VARCHAR(30) NOT NULL)

CREATE TABLE DBO.MARCAS
	(ID INT PRIMARY KEY NOT NULL,
	NOMBRE VARCHAR(30) NOT NULL)

CREATE TABLE DBO.CATEGORIAS
	(ID INT PRIMARY KEY NOT NULL,
	NOMBRE VARCHAR(30) NOT NULL)

CREATE TABLE DBO.PRODUCTOS
	(ID INT PRIMARY KEY NOT NULL,
	NOMBRE VARCHAR(50) NOT NULL,
	IDMARCA INT FOREIGN KEY REFERENCES MARCAS(ID),
	IDCATEGORIA INT FOREIGN KEY REFERENCES CATEGORIAS(ID),
	STOCK INT NOT NULL,
	STOCKMINIMO INT NOT NULL,
	GANANCIA DECIMAL(10,2) NOT NULL)

CREATE TABLE DBO.VENTAS
	(NUMEROFACTURA INT PRIMARY KEY NOT NULL IDENTITY(1,1),
	IDCLIENTE INT FOREIGN KEY REFERENCES CLIENTES(ID),
	PRECIOPARCIAL MONEY NOT NULL,
	PRECIOFINAL MONEY NOT NULL)

CREATE TABLE DBO.COMPRAS
	(ID INT PRIMARY KEY NOT NULL,
	IDPROVEEDOR INT FOREIGN KEY REFERENCES PROVEEDORES(ID),
	FECHACOMPRA DATE NOT NULL,
	PRECIOFINAL MONEY NOT NULL)

CREATE TABLE DBO.PRODUCTOSCOMPRA
	(IDPRODUCTO INT NOT NULL PRIMARY KEY FOREIGN KEY REFERENCES PRODUCTOS(ID),
	IDCOMPRA INT NOT NULL FOREIGN KEY REFERENCES COMPRAS(ID),
	CANTIDAD INT NOT NULL,
	PRECIOFINAL DECIMAL NOT NULL)

CREATE TABLE DBO.PRODUCTOSVENTA
	(IDPRODUCTO INT NOT NULL PRIMARY KEY FOREIGN KEY REFERENCES PRODUCTOS(ID),
	IDCOMPRA INT NOT NULL FOREIGN KEY REFERENCES VENTAS(NUMEROFACTURA),
	CANTIDAD INT NOT NULL,
	PRECIOFINAL DECIMAL NOT NULL)